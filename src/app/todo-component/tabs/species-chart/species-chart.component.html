<div class="form">

    <h1 class="stats">ESPÈCES</h1>

    <form [formGroup]="searchForm"> <!-- (ngSubmit)="onSubmit(searchForm)" -->

    
        <div class="thumbnail">
            <div *ngFor="let date of date.controls; let i=index">
                <mat-form-field>
                    <mat-select placeholder="Choisir une date" [formControl]="date">
                        <mat-option *ngFor="let fish of date$" [value]="fish.date" (click)="onSelect()">
                            {{fish.date | date: 'dd/MM/yyyy'}}
                        </mat-option><!-- | date: 'dd/MM/yyyy' : ATTENTION : PIPE EN CONFLIT SI UTILISEE AVEC SATURN DATEPICKER !!! -->
    
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <div class="thumbnail">
            <div *ngFor="let nameSp of nameSp.controls; let i=index">
                <mat-form-field>        
                    <mat-select placeholder="Espèce" [formControl]="nameSp">
                        <mat-option *ngFor="let fish of nameSp$; let i = index" [value]="fish.name_specie" (click)="onSelect()">{{fish.name_specie}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <div class="thumbnail">
            <div *ngFor="let zone of zone.controls; let i=index">
                <mat-form-field>
                    <mat-select placeholder="Zone" [formControl]="zone">
                        <mat-option *ngFor="let fish of zone$" [value]="fish.zone" (click)="onSelect()">
                            {{fish.zone}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>       


        <!--     
            <div class="thumbnail">
                <div>
                    <mat-form-field>
                        <input matInput placeholder="Choose a date" [satDatepicker]="picker" [formControl]="date">
                        <sat-datepicker-toggle matSuffix [for]="picker"></sat-datepicker-toggle>
                        <sat-datepicker #picker [rangeMode]="false" [closeAfterSelection]="true" startView="year" touchUi (click)="onSelect()">
                        </sat-datepicker>
                    </mat-form-field>
                </div>
            </div>
        -->

    </form>

</div>



<div class="submit">

    <br>

    <!-- 
        <button mat-button type="submit" [disabled]="searchForm.invalid">Rechercher</button>
    -->

    <button mat-button [disabled]="searchForm.invalid" class="button" (click)="onSpeciesLabels()">Résultats</button>
    <button mat-button class="button" (click)="onReset()">Données générales</button>

</div>

<br>

<!-- pour test :
    <div>
        <p style="text-align:center">Form Values: {{ searchForm.value | json }}<p>
        <p style="text-align:center">Form Values: {{ searchForm.value.name_specie | json }}</p>
    </div> 
-->

<div class="container">
    <app-chart-update [type]="type" [data]="data" [options]="options"></app-chart-update>
</div>